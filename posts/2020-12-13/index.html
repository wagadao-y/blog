<!doctype html><html lang=ja><head><meta charset=utf-8><title>wagadao-y's Blog</title><link rel=stylesheet href=https://wagadao-y.github.io/blog/css/reset.css><link rel=stylesheet href=https://wagadao-y.github.io/blog/css/style.css></head><body><header><a href=https://wagadao-y.github.io/blog/index.html class=header-title><div>wagadao-y's Blog</div></a></header><main><article><h1>Verilogのインデントを自動整形するPythonスクリプトを書いた</h1><p>Verilog のコードでインデントだけを整形してくれるフォーマッタが欲しいと思ったので作った。
使い方は引数に整形したいファイルを指定して実行すればok。</p><p>てすと</p><p><a href=https://github.com/wagadao-y/verilog-indenter>https://github.com/wagadao-y/verilog-indenter</a></p><pre><code>./verilog-indent.py [整形したい Verilog ファイル名]
</code></pre><p>整形前</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-verilog data-lang=verilog><span style=color:#66d9ef>module</span> counter(
<span style=color:#66d9ef>input</span> CLK,
<span style=color:#66d9ef>input</span> RESET,
<span style=color:#66d9ef>output</span> <span style=color:#66d9ef>reg</span> [<span style=color:#ae81ff>31</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] COUNT
);
<span style=color:#66d9ef>always</span> @(<span style=color:#66d9ef>posedge</span> CLK) <span style=color:#66d9ef>begin</span>
<span style=color:#66d9ef>if</span> (RESET <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span><span style=color:#ae81ff>&#39;b1</span>) <span style=color:#66d9ef>begin</span>
COUNT <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>32</span><span style=color:#ae81ff>&#39;d0</span>;
<span style=color:#66d9ef>end</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>begin</span>
COUNT <span style=color:#f92672>&lt;=</span> COUNT <span style=color:#f92672>+</span> <span style=color:#ae81ff>32</span><span style=color:#ae81ff>&#39;d1</span>;
endcount
<span style=color:#66d9ef>end</span>
<span style=color:#66d9ef>end</span>
<span style=color:#66d9ef>endmodule</span>
</code></pre></div><p>整形後</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-verilog data-lang=verilog><span style=color:#66d9ef>module</span> counter(
    <span style=color:#66d9ef>input</span>             CLK,
    <span style=color:#66d9ef>input</span>             RESET,
    <span style=color:#66d9ef>output</span> <span style=color:#66d9ef>reg</span> [<span style=color:#ae81ff>31</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] COUNT
);
    <span style=color:#66d9ef>always</span> @(<span style=color:#66d9ef>posedge</span> CLK) <span style=color:#66d9ef>begin</span>
        <span style=color:#66d9ef>if</span> (RESET <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span><span style=color:#ae81ff>&#39;b1</span>) <span style=color:#66d9ef>begin</span>
            COUNT <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>32</span><span style=color:#ae81ff>&#39;d0</span>;
        <span style=color:#66d9ef>end</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>begin</span>
            COUNT <span style=color:#f92672>&lt;=</span> COUNT <span style=color:#f92672>+</span> <span style=color:#ae81ff>32</span><span style=color:#ae81ff>&#39;d1</span>;
        <span style=color:#66d9ef>end</span>
    <span style=color:#66d9ef>end</span>
<span style=color:#66d9ef>endmodule</span>
</code></pre></div><p>VS Code と連携させてファイル保存時に自動整形とかさせたい…</p></article></main><script src=js/instantclick.min.js data-no-instant></script><script data-no-instant>InstantClick.init();</script></body></html>